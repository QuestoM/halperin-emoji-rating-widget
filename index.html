<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>Halperin Emoji Rating</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { colors: { brandBlue: '#00B0F0' } } } };
  </script>

  <!-- React 18 + ReactDOM (×’×¨×¡××•×ª UMD ×’×œ×•×‘×œ×™×•×ª) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel-Standalone â€“ ×§×•××¤×™×œ×¨ JSX ×‘×–××Ÿ-×¨×™×¦×” -->
  <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
</head>

<body class="bg-gray-50 flex items-center justify-center min-h-screen">
  <div id="root"></div>

  <!-- ×”×§×•×“: type=\"text/babel\" ×›×“×™ ×©×‘×‘×œ ×™×§××¤×œ ×œ-JS -->
  <script type="text/babel">
    const { useState }   = React;
    const { createRoot } = ReactDOM;

    /* ---------------- ×§×•××¤×•× × ×˜×ª ×”×“×™×¨×•×’ ---------------- */
    const HalperinEmojiRating = () => {
      const [sel, setSel] = useState(null);          // â€×“×™×¨×•×’
      const [view, setV]  = useState('rating');      // rating | feedback | success
      const [good, setG]  = useState('');
      const [bad,  setB]  = useState('');
      const [busy, setBusy]=useState(false);

      const google = 'https://g.page/r/CRKQvqYdnP4sEBM/review';
      const rates  = [
        {v:5,e:'ğŸ˜',l:'××¦×•×™×Ÿ'},
        {v:4,e:'ğŸ˜Š',l:'×˜×•×‘ ×××•×“'},
        {v:3,e:'ğŸ˜',l:'×‘×¡×“×¨'},
        {v:2,e:'ğŸ˜•',l:'×¤×—×•×ª ×˜×•×‘'},
        {v:1,e:'ğŸ˜¢',l:'×××›×–×‘'}
      ];

      /* ×‘×—×™×¨×ª ×“×™×¨×•×’ */
      const choose = r=>{
        setSel(r);
        if(r.v===5){ setV('success'); setTimeout(()=>location.href=google,4e3);}
        else if(r.v===4){ setV('success'); }
        else { setTimeout(()=>setV('feedback'),250);}
      };

      /* ×©×œ×™×—×ª ××©×•×‘ */
      const send = ()=>{
        if(!bad.trim()&&!good.trim()) return;
        setBusy(true);
        setTimeout(()=>{
          console.log({rating:sel.v,bad,good,t:new Date().toISOString()});
          setBusy(false); setV('success');
        },1e3);
      };

      /* ---------- SUCCESS ---------- */
      if(view==='success'){
        if(sel?.v===5) return (
          <div className="bg-white rounded-xl shadow p-6 max-w-sm text-center border border-gray-100">
            <div className="text-4xl mb-2">ğŸ‰</div>
            <h3 className="text-lg font-semibold mb-1">×ª×•×“×” ×¨×‘×” ×¢×œ ×”×“×™×¨×•×’ ×”××•×©×œ×!</h3>
            <p className="text-sm text-gray-600 mb-4">×”×§×œ×§×” ×§×¦×¨×” ×‘-Google ×ª×¢×–×•×¨ ×œ× ×• ×××•×“ ğŸ™</p>
            <a href={google} className="inline-block px-4 py-2.5 rounded-lg text-white text-sm font-medium"
               style={{background:'#00B0F0'}}>×œ×“×™×¨×•×’ ×‘-Google</a>
            <p className="text-xs text-gray-500 mt-3">× ×¢×‘×™×¨ ××ª×›× ××•×˜×•××˜×™×ª ×‘×¢×•×“ 4 ×©× ×™×•×ªâ€¦</p>
          </div>);
        if(sel?.v===4) return (
          <div className="bg-white rounded-xl shadow p-6 max-w-sm text-center border border-gray-100">
            <div className="text-4xl mb-2">ğŸ™</div>
            <h3 className="text-lg font-semibold mb-1">×ª×•×“×” ×¢×œ ×”××©×•×‘ ×”×—×™×•×‘×™!</h3>
            <p className="text-sm text-gray-600">×©××—×™× ×©× ×”× ×™×ª× ğŸ¤—</p>
          </div>);
        return (
          <div className="bg-white rounded-xl shadow p-6 max-w-sm text-center border border-gray-100">
            <div className="text-4xl mb-2">âœ…</div>
            <h3 className="text-lg font-semibold mb-1">×§×™×‘×œ× ×•, ×ª×•×“×”!</h3>
            <p className="text-sm text-gray-600">×× ×—× ×• ×›×‘×¨ ×¢×•×‘×“×™× ×¢×œ ×©×™×¤×•×¨</p>
          </div>);
      }

      /* ---------- FEEDBACK ---------- */
      if(view==='feedback') return (
        <div className="bg-white rounded-xl shadow p-6 max-w-sm border border-gray-100">
          <h3 className="text-base font-semibold mb-4">× ×©××— ×œ×©××•×¢ ××™×š × ×•×›×œ ×œ×”×©×ª×¤×¨ ğŸ™</h3>
          <div className="space-y-3">
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">××” × ×•×›×œ ×œ×©×¤×¨? ğŸ¯</label>
              <textarea rows="2" className="w-full text-sm border border-gray-200 rounded-lg px-3 py-2
                                             focus:outline-none focus:ring-2 focus:ring-brandBlue resize-none"
                        placeholder="×¡×¤×¨×• ×œ× ×• ××” ×¤×—×•×ª ×¢×‘×“"
                        value={bad} onChange={e=>setB(e.target.value)} />
            </div>
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">××” ××”×‘×ª×? ğŸ’™</label>
              <textarea rows="2" className="w-full text-sm border border-gray-200 rounded-lg px-3 py-2
                                             focus:outline-none focus:ring-2 focus:ring-brandBlue resize-none"
                        placeholder="×¨×’×¢×™× ×˜×•×‘×™× ××• ×¦×•×•×ª ××¦×•×™×Ÿ"
                        value={good} onChange={e=>setG(e.target.value)} />
            </div>
            <button onClick={send}
                    disabled={busy||(!bad.trim()&&!good.trim())}
                    className="w-full py-2.5 rounded-lg text-white text-sm font-medium disabled:opacity-50
                               flex items-center justify-center gap-1"
                    style={{background:'#00B0F0'}}>
              {busy?'×©×•×œ×—â€¦':<>âœ‰ï¸<span>×©×œ×— ××©×•×‘</span></>}
            </button>
          </div>
        </div>);

      /* ---------- RATING ---------- */
      return (
        <div className="bg-white rounded-xl shadow p-6 max-w-sm border border-gray-100">
          <h2 className="text-base font-semibold text-center mb-5 flex items-center justify-center gap-1">
            ××™×š ×”×™×™×ª×” ×”×—×•×•×™×” ×©×œ×›× ×‘×¡× ×™×£? ğŸ¤“
          </h2>
          <div className="flex justify-between gap-2">
            {rates.map(r=>(
              <button key={r.v} onClick={()=>choose(r)}
                      className={`flex flex-col items-center gap-1 p-2 rounded-lg transition hover:scale-105
                          ${sel?.v===r.v?'bg-blue-50 border-2 border-brandBlue':'hover:bg-gray-50'}`}
                      style={{minWidth:'54px'}}>
                <span className="text-2xl">{r.e}</span>
                <span className="text-[11px] text-gray-600 leading-tight">{r.l}</span>
              </button>))}
          </div>
        </div>);
    };

    /* ×”×¨×¦×” */
    createRoot(document.getElementById('root')).render(<HalperinEmojiRating />);
  </script>
</body>
</html>
